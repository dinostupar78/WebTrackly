CREATE TABLE USER(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    FIRST_NAME VARCHAR(30) NOT NULL,
    LAST_NAME VARCHAR(30) NOT NULL,
    DATE_OF_BIRTH TIMESTAMP NOT NULL,
    NATIONALITY VARCHAR(30) NOT NULL,
    GENDER_TYPE VARCHAR(15) NOT NULL,
    USERNAME VARCHAR(50) NOT NULL,
    HASHED_PASSWORD VARCHAR(255) NOT NULL,
    ROLE VARCHAR(30) NOT NULL,
    PRIMARY KEY (ID)

);

CREATE TABLE WEBSITE(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    WEBSITE_NAME VARCHAR(25) NOT NULL,
    WEBSITE_CLICKS INTEGER NOT NULL,
    WEBSITE_URL VARCHAR(255) NOT NULL,
    WEBSITE_USER_COUNT INTEGER NOT NULL,
    BOUNCE_RATE DECIMAL(6,2) NOT NULL,
    PRIMARY KEY (ID)

);

CREATE TABLE WEBSITE_USER(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    USER_ID LONG NOT NULL,
    WEBSITE_ID LONG NOT NULL,
    FOREIGN KEY(USER_ID) REFERENCES USER(ID),
    FOREIGN KEY(WEBSITE_ID) REFERENCES WEBSITE(ID)
    PRIMARY KEY (ID)

);

CREATE TABLE SESSION(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    USER_ID LONG NOT NULL,
    DEVICE_TYPE VARCHAR(30) NOT NULL,
    SESSION_DURATION DECIMAL(6,2) NOT NULL,
    START_TIME TIMESTAMP NOT NULL,
    END_TIME TIMESTAMP NOT NULL,
    IS_ACTIVE BOOLEAN NOT NULL,
    FOREIGN KEY(USER_ID) REFERENCES USER(ID)
    PRIMARY KEY (ID)

);

CREATE TABLE USER_ACTION(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    USER_ID LONG NOT NULL,
    ACTION VARCHAR(30) NOT NULL,
    WEBSITE_ID LONG NOT NULL,
    ACTION_TIMESTAMP TIMESTAMP NOT NULL,
    DETAILS VARCHAR(255) NOT NULL,
    FOREIGN KEY(USER_ID) REFERENCES USER(ID),
    FOREIGN KEY(WEBSITE_ID) REFERENCES WEBSITE(ID),
    PRIMARY KEY (ID)

);

CREATE TABLE TRAFFIC_RECORD(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    WEBSITE_ID LONG NOT NULL,
    TIME_OF_VISIT TIMESTAMP NOT NULL,
    SESSION_ID LONG NOT NULL,
    FOREIGN KEY(WEBSITE_ID) REFERENCES WEBSITE(ID),
    FOREIGN KEY(SESSION_ID) REFERENCES SESSION(ID),
    PRIMARY KEY (ID)

);

CREATE TABLE NOTIFICATION(
    ID LONG GENERATED ALWAYS AS IDENTITY,
    WEBSITE_ID LONG NOT NULL,
    NOTIFICATION_TIMESTAMP TIMESTAMP NOT NULL,
    NOTIFICATION_TYPE VARCHAR(30) NOT NULL,
    FOREIGN KEY(WEBSITE_ID) REFERENCES WEBSITE(ID),
    PRIMARY KEY (ID)

);